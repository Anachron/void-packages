# Template file for 'heimdal'
pkgname=heimdal
version=7.7.0
revision=1
build_style=gnu-configure
configure_args="--without-openldap --without-capng --without-sqlite3 --without-libintl --without-openssl --without-berkeley-db --without-readline --without-libedit --without-hesiod --without-x --disable-heimdal-documentation --with-db-type-preference="
makedepends="ncurses-devel"
short_desc="Kerberos 5, PKIX, GSS-API, SPNEGO, NTLM, MD5, SASL implementation"
maintainer="Gerardo Di Iorio <arete74@gmail.com>"
license="custom"
homepage="http://www.h5l.org/"
distfiles="https://github.com/heimdal/heimdal/releases/download/heimdal-$version/heimdal-$version.tar.gz"
checksum=f02d3314d634cc55eb9cf04a1eae0d96b293e45a1f837de9d894e800161b7d1b
post_install() {
	vlicense LICENSE
	rm $DESTDIR/usr/share/man/cat* -r
	rm $DESTDIR/usr/bin/su $DESTDIR/usr/share/man/man1/su.1

	vinstall lib/com_err/.libs/compile_et 755 usr/libexec/heimdal
}

heimdal-devel_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/share/man/man3
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.a"
		vmove "usr/lib/*.so"
	}
}
