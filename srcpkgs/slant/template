# Template file for 'slant'
pkgname=slant
version=0.0.21
revision=1
build_style=configure
configure_args="PREFIX=/usr MANDIR=/usr/share/man SBINDIR=/usr/bin"
make_cmd="bmake"
make_check_target="regress"
hostmakedepends="bmake"
makedepends="ksql kcgi libressl-devel ncurses-devel openradtool sqlbox zlib-devel"
short_desc="Minimal open source system monitor for remote UNIX machines"
maintainer="Anachron <gith@cron.world>"
license="ISC"
homepage="https://kristaps.bsd.lv/slant"
distfiles="https://kristaps.bsd.lv/slant/snapshots/slant-${version}.tar.gz"
checksum=69733d8b1cae1b6144a8a8f3e40615fee687512039f8fcc88b1bca73bf42ab08

# /usr/bin/ld: slant-dns.o: in function 'dns_parse_url':
# /builddir/slant-0.0.21/slant-dns.c:117: undefined reference to '__b64_ntop'
pre_configure() {
	vsed -i 's|$(LDADD_SLANT)|-lresolv $(LDADD_SLANT)|g' Makefile
}

post_install() {
	vlicense LICENSE.md
}
