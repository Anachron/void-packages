# Template file for 'pgmodeler'
pkgname=pgmodeler
version=0.9.1
revision=1
hostmakedepends="libxml2-devel qt5-qmake pkg-config postgresql-libs-devel qt5-svg-devel"
makedepends="libxml2-devel postgresql-libs-devel qt5-svg-devel"
short_desc="Open source data modeling tool designed for PostgreSQL"
maintainer="Anachron <gith@cron.world>"
license="GPL-3.0-or-later"
homepage="https://pgmodeler.io/"
distfiles="https://github.com/${pkgname}/${pkgname}/archive/v${version}.tar.gz"
checksum=943a757cded544629a2a2e896afac7f229c125052c1807c424831b5e0e71c8fc

do_build() {
	/usr/lib/qt5/bin/qmake CONFIG+=release \
		PREFIX=/usr \
		CONFDIR=/etc/pgmodeler \
		PRIVATEBINDIR=/usr/bin \
		DOCDIR=/usr/share/doc/pgmodeler \
		SAMPLESDIR=/usr/share/doc/pgmodeler \
		NO_UPDATE_CHECK=yes \
		QMAKE_CXXFLAGS_RELEASE+="${XBPS_CFLAGS}" \
		pgmodeler.pro
	make
}

do_install() {
	make INSTALL_ROOT="${PKGDESTDIR}" install
}
